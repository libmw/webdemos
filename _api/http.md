---
  layout: api
  title: http
---


## 协议

#### 协议参考 <http://blog.csdn.net/gueter/article/details/1524447>

## http缓存

关于浏览器缓存可以看看这篇文章：

[缓存机制浅析 - 移动端 Web 加载性能优化](http://segmentfault.com/a/1190000004132566)

基本上的缓存设置原则文章里说了

* 首先让静态文件永远被缓存，也就是设置 `cache-control:max-age=315360000` 这个是淘宝的，10年

* 静态文件更新通过更新静态文件url来完成，在编译阶段把静态文件的文件名改为带MD5的格式

* 开发环境不使用缓存，通过304来拉取最近文件。如果开发环境也是用缓存，每次都需要强刷。

### 刷新

* 只有直接在地址栏打开url的时候才会使用200 from cache 缓存

* 手动刷新页面（F5)，浏览器会直接认为缓存已经过期（可能缓存还没有过期），在请求中加上字段：Cache-Control:max-age=0，发包向服务器查询是否有文件是否有更新。

* 强制刷新页面（Ctrl+F5)，浏览器会直接忽略本地的缓存（有缓存也会认为本地没有缓存），在请求中加上字段：Cache-Control:no-cache（或 Pragma:no-cache），发包向服务重新拉取文件。



## Ajax

在ie里使用ajax的get请求，如果服务器没有返回no-cache，则会缓存请求。也就是说每次请求的内容都是一样的，不管服务器更新没更新。

所以使用$.get或者$.getJSON都需要加上 `_t = (+ new Date())` 参数


